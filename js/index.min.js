!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e){"use strict";function n(t){var e={winner:0,winning_row:0,X_threats:[],O_threats:[]},n=[t[0][0],t[1][1],t[2][2]],r=[t[2][0],t[1][1],t[0][2]],i=n.filter(function(t){return"X"==t}).length,s=n.filter(function(t){return"O"==t}).length,a=r.filter(function(t){return"X"==t}).length,u=r.filter(function(t){return"O"==t}).length;if(2==i&&!s)switch(n.indexOf(0)){case 0:e.X_threats.push([0,0]);break;case 1:e.X_threats.push([1,1]);break;case 2:e.X_threats.push([2,2])}if(2==a&&!u)switch(r.indexOf(0)){case 0:e.X_threats.push([2,0]);break;case 1:e.X_threats.push([1,1]);break;case 2:e.X_threats.push([0,2])}if(2==s&&!i)switch(n.indexOf(0)){case 0:e.O_threats.push([0,0]);break;case 1:e.O_threats.push([1,1]);break;case 2:e.O_threats.push([2,2])}if(2==u&&!a)switch(r.indexOf(0)){case 0:e.O_threats.push([2,0]);break;case 1:e.O_threats.push([1,1]);break;case 2:e.O_threats.push([0,2])}if(3==i||3==s)return e.winner=n[0],e.winning_row=[[0,0],[1,1],[2,2]],e;if(3==a||3==u)return e.winner=r[0],e.winning_row=[[2,0],[1,1],[0,2]],e;for(var h=0;h<3;h++){var o=t[h],c=[t[0][h],t[1][h],t[2][h]],f=o.filter(function(t){return"X"==t}).length,l=o.filter(function(t){return"O"==t}).length;2!=f||l||e.X_threats.push([h,o.indexOf(0)]),2!=l||f||e.O_threats.push([h,o.indexOf(0)]);var d=c.filter(function(t){return"X"==t}).length,p=c.filter(function(t){return"O"==t}).length;if(2!=d||p||e.X_threats.push([c.indexOf(0),h]),2!=p||d||e.O_threats.push([c.indexOf(0),h]),3==f||3==l)return e.winner=o[0],e.winning_row=[[h,0],[h,1],[h,2]],e;if(3==d||3==p)return e.winner=c[0],e.winning_row=[[0,h],[1,h],[2,h]],e}return e}function r(t,e){for(var r,i="X"==e?"O":"X",s=[],a=[],u=[],h=[],o=[],c=0;c<3;c++)for(var f=0;f<3;f++)t[c][f]||(t[c][f]=e,r=n(t),r.winner==e?s.push([c,f]):r[e+"_threats"].length>1?a.push([c,f]):1==r[e+"_threats"].length&&h.push({move:[c,f],target:r[e+"_threats"][0]}),t[c][f]=i,r=n(t),r.winner==i?u.push([c,f]):r[i+"_threats"].length>1&&o.push([c,f]),t[c][f]=0);if(s.length>0)return console.log("winner: ",s[0]),s[0];if(u.length>0)return console.log("block: ",u[0]),u[0];if(a.length>0)return console.log("Fork: ",a[0]),a[0];if(1==o.length)return console.log("fork block:"),o[0];if(o.length>1){for(var c=0;c<h.length;c++){for(var l=!0,f=0;f<o.length;f++)h[c].target.toString()==o[f].toString()&&(l=!1);if(l)return console.log("fork block"),h[c].move}return h[0]}if(!t[1][1])return[1,1];if(!t[0][0]&&t[2][2]==i)return[0,0];if(!t[2][2]&&t[0][0]==i)return[2,2];if(!t[0][2]&&t[2][0]==i)return[0,2];if(!t[2][0]&&t[0][2]==i)return[2,0];var d=[[0,0],[0,2],[2,0],[2,2],[0,1],[1,0],[1,2],[2,1]];return d.filter(function(e){return"0"==t[e[0]][e[1]]})[0]}var i={start_game:function(t,e){document.getElementById("prompt").className="hidden",this.status=[[0,0,0],[0,0,0],[0,0,0]],this.active="X",this.player=t,this.players=e,this.won=!1,this.update_board(),"O"==t&&this.AI()},prompt:function(t){document.getElementById("message").innerText=t?t:"New Game!",document.getElementById("prompt").className=""},play:function(t,e,n){this.status[t][e]||this.won||(1!=this.players||n||this.player==this.active)&&(this.status[t][e]=this.active,this.active="X"==this.active?"O":"X",this.update_board(),this.check()||1==this.players&&this.player!=this.active&&setTimeout(this.AI.bind(this),500))},AI:function(){var t=r(this.status,this.active);this.play(t[0],t[1],!0)},check:function(){var t=n(this.status);return t.winner?(this.win(t.winner,t.winning_row),!0):this.status[0].indexOf(0)==-1&&this.status[1].indexOf(0)==-1&&this.status[2].indexOf(0)==-1&&(this.prompt("Tie Game"),!0)},win:function(t,e){var n=this;this.won=!0;var r=[];e.map(function(t){var e=document.getElementById("r"+t[0]+"c"+t[1]);e.classList.add("win"),r.push(e)}),setTimeout(function(){r.map(function(t){return t.className="square"}),n.prompt(t+" Wins!")},2e3)},init:function(){var t=this,e=document.getElementsByClassName("square");[].map.call(e,function(t){t.addEventListener("click",i.play.bind(i,t.id[1],t.id[3],!1))}),document.getElementById("play_x").addEventListener("click",function(){return t.start_game("X",1)}),document.getElementById("play_o").addEventListener("click",function(){return t.start_game("O",1)}),document.getElementById("play_two").addEventListener("click",function(){return t.start_game("X",2)})},update_board:function(){for(var t=0;t<3;t++)for(var e=0;e<3;e++){var n=this.status[t][e]?this.status[t][e]:"";document.getElementById("r"+t+"c"+e).innerText=n}}};window.onload=function(){i.init()}}]);